{
  "hash": "65d5f5d9347d20e8cb2b5c01d6cb34a1",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Final\"\neditor: source\npublished-title: \"Due date\"\ndate: 2025-06-11\ndate-modified: last-modified\nformat:\n  html:\n    message: false\n    warning: false\n    toc: true\n    toc-depth: 5\n---\n\n\n[Due on Wednesday June 11 at 11:59 PM]{style=\"color: #79ACBD; font-size: 24px;\"}\n\n## Policy on open resources and collaboration\n\nThis policy is meant to provide clearer guidelines regarding what is/is not acceptable.  \n\nAs with other assignments in this class, **this final is open note, communication, internet, etc.**  \n\n**You may refer to lecture/workshop materials to get started on writing or coding.**  \n\n**However, you may only communicate with classmates or use AI tools (e.g. ChatGPT) _after_ you have tried to write code or text on your own.**  \n\nFor example, you may compare answers with classmates and talk through your reasoning _after_ you have thought and written about your answers independently (there are plenty of examples from lecture of how we do this: typically, we think and write on our own, then compare answers with neighbors).  \n\nAdditionally, you may only use ChatGPT or other tools for coding _after_ you have tried to write code independently. An acceptable prompt could be something like, \"I wrote this code to read in my data, but it's not working. How can I fix this?\" _not_ \"Write code for me to read in my data.\"  \n\nFurther, **any use of ChatGPT or other tools like Grammarly may not be used for generating new writing.** An acceptable prompt could be something like, \"I wrote this text to summarize a paired t-test. Edit it to be 1-2 sentences long.\" _not_ \"Write me a 1-2 sentence template to summarize a paired t-test.\"  \n\nLastly, a warning: **Think critically and double check your work at every step. Do not assume that answers given by ChatGPT (or your classmates, or from any other source) are right and/or fit the criteria for what you are being asked to do.**\n\n## Getting help from the instructional team\n\nAs usual, you are welcome to come to drop-in hours, email for meetings, etc.  \n\nIf you are working with classmates (which we encourage you to do!), you are welcome to try to make a group meeting (i.e. you and some friends get helped together) with **An**. You and your peers can email An to set up a meeting time (that works for all of you) to answer questions outside of drop-ins.\n\n## Set up\n\n### a. GitHub steps\n\n- Name the repo `ENVS-193DS_spring-2025_final`, write a description, initialize with a README.  \n\n### b. RStudio steps\n\n- Clone the repository to your computer.  \n- Create a `code` and a `data` folder.\n- Start a new Quarto or Rmarkdown document in the `code` folder.\n- Download any data you need into your `data` folder.\n- Insert a link to your GitHub repo at the top of your document.\n- In your new Quarto document, create a code chunk at the top to read in any packages or data.\n- Throughout the course of completing this portion of the final, commit and push changes at least 10 times.  \n- Write README with a \"General information\" section, \"Data and file overview\" section, and a \"Rendered output\" section.\n- Link to the rendered .html in your \"Rendered output\" section.\n\n## Problem 1. Research writing (36 points)\n\n### Skills you will demonstrate\n\nIn this problem, you will demonstrate your ability to identify gaps in statistical communication and justify _why_ those gaps should be filled.  \n\nAdditionally, you will demonstrate your ability to write about statistics without a complete analysis or the information you would need.\n\n### Problem\n\nYou're working on a research team trying to understand how agricultural runoff in the San Joaquin River Delta influences total nitrogen load (measured in kilograms per year, kg year^-1^). Your co-worker runs some analyses and writes up a report, giving it to you to review. In part 1 of the results section of the report, your co-worker has written:\n\n> We rejected the null hypothesis that there is no correlation between distance from headwater (km) and annual total nitrogen load (kg year^-1^) (p = 0.03).\n\nIn part 2 of the results section of the report, your co-worker has written:\n\n> We rejected the null hypothesis that there is no difference in average nitrogen load (kg year^-1^) between sources (urban land, atmospheric deposition, fertilizer, wastewater treatment, and grasslands) (p = 0.02).\n\nIt's great that this report is coming together, but you think they can improve on what they've written and make it more understandable to a non-statistical audience.  \n\n#### a. Transparent statistical methods (8 points)\n\nWhat statistical tests did your co-worker use? Clearly connect the test to the part that you are addressing (e.g. \"In part 1, they used _______. In part 2, they used _______.\").\n\n#### b. More information needed (8 points)\n\nThe test in part 2 seems familiar to you, but you think there's more that your co-worker needs to do to provide more context for the results. List 2 additional tests and/or pieces of information that should be included, and explain why those tests and/or pieces of information would add useful additional context.  \n\nBe specific and use variables and/or statistics from the example.\n\n#### c. Suggestions for rewriting (20 points)\n\nIn 2-4 sentences, _write a new research statement_ to include the components from parts a-b and a full test summary in parentheses to be transparent about the statistical method.  \n\nBe sure that your rewritten statements clearly delineate the _biological narrative_ from the _statistical summary_. See lecture and workshop for examples of writing.  \n\nNote that your co-worker didn't include any information about the test statistic, distribution, etc., and that you only know the p-value. For any part that you do not know, list that part with a **blank**. For example, you could write something like: \"... **r = _____**, p = 0.03, **$\\alpha$ = _____** ...\"\n\n:::{.callout-note title=\"Real work on nitrogen deposition in the San Joaquin River Delta\" collapse=\"true\"}\n\nThis problem is inspired by a publication outlining the very real consequences for river ecosystems from nitrogen and phosphorus addition to the San Joaquin and Sacramento rivers:   \n\nSaleh, Dina and Joseph Domagalski. 2021. \"Concentrations, Loads, and Associated Trends of Nutrients Entering the Sacramentoâ€“San Joaquin Delta, California.\" _San Francisco Estuary and Watershed Science._ DOI: [10.15447/sfews.2021v19iss4art6](https://doi.org/10.15447/sfews.2021v19iss4art6).\n\n:::\n\n## Problem 2. Data visualization\n\n### Skills you will demonstrate\n\nIn this problem, you will demonstrate your ability to find, clean, summarize, and visualize a data set. You will use data from the Santa Barbara Coastal LTER on sea surface temperature in the Santa Barbara Channel.  \n\nNote that the instructions do not include all the steps you need to do _on purpose_. You will need to use your skills in working backwards from a final product (a visualization) to determine the steps to get there.\n\n### Problem\n\nNavigate to the [SBC LTER's data catalog](https://sbclter.msi.ucsb.edu/data/catalog/). Find and download the dataset on sea surface temperature in the Santa Barbara Channel to your `data` folder.  \n\nIn your set up chunk, read in the data as an object called `sst`.\n\n#### a. Cleaning and summarizing (XX points)\n\nCreate an object called `sst_clean` from `sst`. Clean and summarize the data such that you end up with a data frame like this:  \n\n![](/assignments/images/final/slice-sample-example.png)\n\nwith a structure like this:  \n\n![](/assignments/images/final/str-example.png)\n\nUse the pipe operator (`|>` or `%>%`) to string functions together. After every pipe, start a new line to use the next function. Include annotations for each function you use.  \n\nWhen you are done with all your cleaning steps, display 5 rows from `sst_clean` using `slice_sample()`.  \n\nShow all code.\n\n:::{.callout-tip title=\"A potentially new package?\" collapse=\"true\"}\nYou may find it useful to use functions from the `lubridate` package (pre-loaded in `tidyverse`, so you don't have to install/read it in separately).  \n\nNot sure where to start? Google the package and read about it.\n:::\n\n:::{.callout-tip title=\"Double check your code!\" collapse=\"true\"}\n\nWhen writing your cleaning and summarizing code, run your code after adding each function. Does your data frame look the way you'd expect?  \n\nAdditionally, **pay attention to the components in the figure.** What has to be true about your data frame in order for you to recreate this figure? (Hint: think about what years are displayed in the figure, and contrast that with the years in the data set.)\n\n:::\n\n#### b. Visualize the data (XX points)\n\nRecreate this visualization:\n\n![](/assignments/images/final/SST.jpeg)\n\nIn addition to displaying the correct subset of the data, the specific aesthetic components you need to recreate are:  \n\n- the geometries\n- the x-, y-axis, and legend text and labels\n- a color gradient in a single color (doesn't have to be blue, can be any other color) going from light --> dark for 2018 --> 2023\n- the legend position inside the panel\n- the panel border and background\n\n## Problem 2. Data presentation (12 points)\n\n### Skills you will demonstrate\n\nIn this problem, you will demonstrate your ability to **critique a figure and make suggestions to make it better**. Additionally, you will demonstrate **your understanding of the code to implement those suggestions**.\n\n### Problem\n\nYou're working on a team with someone analyzing the effects of experimental ocean acidification (measured in pH) on California mussel (_Mytilus californianus_) shell calcification (measured in difference in grams pre- and post-experiment). They come to you with a draft of a paper they're writing to share their results. They've created a figure that looks like this:  \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# generating data\nset.seed(666)\ndata <- tibble(\n  treatment_low = rnorm(n = 20, mean = 5, sd = 1),\n  treatment_medium = rnorm(n = 20, mean = 4, sd = 1),\n  treatment_high = rnorm(n = 20, mean = 3, sd = 1)\n) %>% \n  mutate(across(1:3, ~round(., 2))) %>% \n  pivot_longer(cols = treatment_low:treatment_high,\n               names_to = \"treatment\",\n               values_to = \"diff_mass_g\")\n\nggplot(data = data,\n       aes(x = treatment,\n           y = diff_mass_g,\n           fill = treatment)) +\n  stat_summary(geom = \"bar\",\n               fun = mean) +\n  stat_summary(geom = \"errorbar\",\n               fun.data = mean_se,\n               width = 0.2)\n```\n:::\n\n\nYou then ask them to show you their code, and they show you this:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = data,\n       aes(x = treatment,\n           y = diff_mass_g,\n           fill = treatment)) +\n  stat_summary(geom = \"bar\",\n               fun = mean) +\n  stat_summary(geom = \"errorbar\",\n               fun.data = mean_se,\n               width = 0.2)\n```\n:::\n\n\n#### a. Figure improvements (6 points)\n\nYou come up with a list of things they could do to make their figure better (list below). In one bullet point per component, articulate why making that change could make their figure better (1 sentence maximum if writing in full sentences):  \n\n- take out the legend   \n- show the underlying data   \n- change the axis titles/labels   \n- reorder the x-axis   \n- take out the gridlines   \n- use different colors   \n\n#### b. Give an example (6 points)\n\nDraw an example of what the updated figure could look like on paper or digitally (e.g. Procreate, Adobe Illustrator) - whatever you have available to you. Label each component with the function or geom that your coworker would need to create the figure.  \n\nInsert a screenshot or photo in your document. \n\n## Problem 3. Data analysis (60 points)\n\n### Skills you will demonstrate\n\nIn this problem, you will be working with the bat recapture dataset from Hopkins, S.R., Hoyt, J.R., White, J.P. et al. Continued preference for suboptimal habitat reduces bat survival with white-nose syndrome. Nat Commun 12, 166 (2021). https://doi.org/10.1038/s41467-020-20416-5  \n\nYou will demonstrate your ability to **understand a data set that someone else collected** and **identify and execute the appropriate statistical method, with all assumption checks**. Additionally, you will demonstrate your ability to **visualize and communicate about the results of your statistical test**.\n\n### Problem\n\nBefore starting this problem, google the bat species and the disease. Skim the abstract and methods to understand where the data came from.  \n\n### Context \n\nAnswer these questions in full sentences (1 sentence each).\n\n#### a. Response variable (2 points)  \n\nWhat do the 1s and 0s mean in this data set?\n\n#### b. Biological interpretation of response (2 points)\n\nIn this data set, what does \"recapture\" represent biologically?\n\n### Data cleaning\n\nBefore doing this step, read in the data and store it as a new object called `bats`. Do any exploring you need to do but **DO NOT include any code or output from your data exploration.**   \n\n#### c. Clean the data (3 points)\n\nCopy the cleaning code below to create an object called `bats_clean`.  \n\nWhere each line is marked `insert annotation here`, write an annotation to describe what the code is doing.  \n\n\n::: {.cell}\n\n```{.r .cell-code}\nbats_clean <- bats %>% \n  # create categories for disease load based on log-transformed values\n  mutate(disease_load = case_when(\n    logearlyloads < -3 ~ \"low\",\n    between(logearlyloads, -3, -2) ~ \"moderate\",\n    between(logearlyloads, -2, 0) ~ \"high\",\n  ),\n  # insert annotation here\n  disease_load = fct_relevel(disease_load, \"low\", \"moderate\", \"high\")) %>% \n  # insert annotation here\n  rename(recapture_prob = EverRecapturedYN.x,\n         temp = earlytemp) %>% \n  # insert annotation here\n  select(recapture_prob, temp, disease_load) %>% \n  drop_na(temp)\n```\n:::\n\n\n### Analysis\n\n#### d. Run the model (2 points)\n\nWrite your code to run the appropriate model. Annotate your code.  \n\n#### e. Check the diagnostics (2 points)\n\nCheck your diagnostics. Display the output.\n\n#### f. Make a decision about your diagnostics (4 points) \n\nIn 1-2 sentences, describe whether or not you have anything to worry about with your diagnostic plots.  \n\n#### g. Visualize the model predictions (13 points)\n\nCreate a plot showing model predictions with 95% confidence intervals and the underlying data.  \n\nShow and annotate all code. Show the output.   \n\nFor full credit:\n\n- finalize the plot\n- take out the gridlines\n- use colors that are different from the default\n\n#### h. Write a caption for your plot (6 points)\n\n#### i. Calculate model predictions (13 points)\n\nCalculate the predicted probabilities of recapture at 6 and 12 degrees C for each level in `disease_load`. Display the output in a table. Include the predicted probability of recapture with the 95% confidence interval. Round numbers as needed.  \n\nShow and annotate all code.\n\n#### j. Write a caption for your table (3 points)\n\n#### k. Interpret your results (10 points)\n\nWrite 3-5 sentences summarizing what you found, making references to the figure you made in part ____ and the table from part _____. This should include your interpretation of:\n\n- the **interaction** of disease load and temperature on the probability of recapture  \n- the predicted probability of recapture at low temperatures (6 Â°C) and high temperatures (12 Â°C)\n\n## Checklist\n\nYour submission should\n\n- include your name(s), the title (\"Final\"), and the date **(3 points)**  \n- include for Problem 1  \n  - written responses to parts a-c  \n- include for Problem 2  \n  - written response to part a  \n  - photo/screenshot for part b  \n- include for Problem 3  \n  - written responses to parts a-b  \n  - annotated code for parts c-e  \n  - written response for part f  \n  - annotated code and output (figure) for part g  \n  - written response for part h  \n  - annotated code and output (table) for part i  \n  - written responses for parts j-k   \n- include written responses to Problem 3 parts a-b, annotated code for part c  \n- be uploaded to Canvas as a single PDF **(1 point)**  \n- be organized and readable **(10 points)**, meaning that  \n  - you are submitting a rendered PDF  \n  - all messages and warnings are hidden  \n  - all figures and tables are displayed correctly in the rendered PDF  \n  - all code annotations are visible in the rendered PDF  \n  - you have a set up chunk at the beginning and each section only has the code corresponding to that specific section (for example, no reading in packages/data in the chunk to create a visualization)  \n  - your document only has the components required (for example, if you wrote code to explore the data, you should not have that code in your document)  \n- be associated with a GitHub repository **(15 points)**, meaning that  \n  - you have a link to your GitHub repository at the top of your document  \n  - you have committed/pushed at least 10 times over the course of completing your homework  \n  - at least 10 of your commits/pushes contain a descriptive, concise commit message (a few words describing what changes you are committing)  \n- include an informative README **(10 points)** with a \"General information\" section, \"Data and file overview\" section, and a \"Rendered output\" section\n\n**128 points total**\n\n",
    "supporting": [
      "final-problem-set_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}