{
  "hash": "33875b11748bfa9694bf9176391713b7",
  "result": {
    "markdown": "---\ntitle: \"Coding workshop: Week 10\"\ndescription: \"generalized linear models\"\nfreeze: auto\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: false\nexecute:\n  message: false\n  warning: false\nauthor:\n  - name: An Bui\n    url: https://an-bui.com/\n    affiliation: UC Santa Barbara, Ecology, Evolution, and Marine Biology\n    affiliation-url: https://www.eemb.ucsb.edu/\ndate: 2023-06-07\ncategories: [generalized linear models, salamanders]\ncitation:\n  url: https://an-bui.github.io/ES-193DS-W23/workshop/workshop-10_2023-06-07.html\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n# model packages\nlibrary(MASS) # have to read this in before tidyverse \nlibrary(lme4)\nlibrary(glmmTMB) # ok if you don't have this - just comment it out\n\n# diagnostics and model info\nlibrary(DHARMa)\nlibrary(MuMIn)\nlibrary(ggeffects)\nlibrary(lmtest)\nlibrary(broom)\n\n# general usage\nlibrary(tidyverse)\nlibrary(here)\nlibrary(naniar)\nlibrary(skimr)\nlibrary(GGally)\nlibrary(flextable)\n\nsalamanders <- read_csv(here(\"data\", \"salamanders.csv\"))\n```\n:::\n\n\n# Data info from `glmmTMB`:\n\n`site`: name of a location where repeated samples were taken  \n`mined`: factor indicating whether the site was affected by mountain top removal coal mining  \n`cover`: amount of cover objects in the stream (scaled)  \n`sample`: repeated sample  \n`DOP`: Days since precipitation (scaled)  \n`Wtemp`: water temperature (scaled)  \n`DOY`: day of year (scaled)  \n`spp`: abbreviated species name, possibly also life stage  \n`count`: number of salamanders observed  \n\n# Explore the data set:\n\n## histogram of counts:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(salamanders, aes(x = count)) +\n  geom_histogram(bins = 17)\n```\n\n::: {.cell-output-display}\n![](workshop-10_2023-06-07_files/figure-html/histogram-1.png){width=672}\n:::\n:::\n\n\n## Missingness:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngg_miss_var(salamanders) # nothing missing!\n```\n\n::: {.cell-output-display}\n![](workshop-10_2023-06-07_files/figure-html/missingness-1.png){width=672}\n:::\n:::\n\n\n## Skim: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nskim(salamanders)\n```\n\n::: {.cell-output-display}\nTable: Data summary\n\n|                         |            |\n|:------------------------|:-----------|\n|Name                     |salamanders |\n|Number of rows           |644         |\n|Number of columns        |9           |\n|_______________________  |            |\n|Column type frequency:   |            |\n|character                |3           |\n|numeric                  |6           |\n|________________________ |            |\n|Group variables          |None        |\n\n\n**Variable type: character**\n\n|skim_variable | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:-------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|site          |         0|             1|   3|   5|     0|       23|          0|\n|mined         |         0|             1|   2|   3|     0|        2|          0|\n|spp           |         0|             1|   2|   5|     0|        7|          0|\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate| mean|   sd|    p0|   p25|   p50|  p75|  p100|hist  |\n|:-------------|---------:|-------------:|----:|----:|-----:|-----:|-----:|----:|-----:|:-----|\n|cover         |         0|             1| 0.00| 0.98| -1.59| -0.70| -0.05| 0.60|  1.89|▅▇▇▅▃ |\n|sample        |         0|             1| 2.50| 1.12|  1.00|  1.75|  2.50| 3.25|  4.00|▇▇▁▇▇ |\n|DOP           |         0|             1| 0.00| 0.98| -2.20| -0.30| -0.09| 0.00|  3.17|▂▇▅▂▁ |\n|Wtemp         |         0|             1| 0.00| 0.98| -3.02| -0.61|  0.04| 0.60|  2.21|▁▃▇▆▂ |\n|DOY           |         0|             1| 0.00| 1.00| -2.71| -0.57| -0.06| 0.97|  1.46|▁▅▇▅▇ |\n|count         |         0|             1| 1.32| 2.64|  0.00|  0.00|  0.00| 2.00| 36.00|▇▁▁▁▁ |\n:::\n:::\n\n\n## Pairs plot:  \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsalamanders %>% \n  select(!site) %>% \n  ggpairs()\n```\n\n::: {.cell-output-display}\n![](workshop-10_2023-06-07_files/figure-html/pairs-plot-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n# Question: How does salamander count vary with mined status, species, and stream cover?\n\n## Build models\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# linear model, we know this is wrong\nsalmod1 <- lm(count ~ cover + mined + spp, data = salamanders)\n\n# generalized linear model with Poisson distribution\nsalmod2 <- glm(count ~ cover + mined + spp, data = salamanders, family = \"poisson\")\nsalmod2.a <- glm(count ~ cover + mined + spp, data = salamanders, family = \"poisson\")\n\n# generalized linear model with negative binomial distribution\nsalmod3 <- glm.nb(count ~ cover + mined + spp, data = salamanders)\nsalmod3.a <- glmmTMB(count ~ cover + mined + spp, data = salamanders, family = \"nbinom2\")\n\n# generalized linear model with Poisson distribution and random effect of site\nsalmod4 <- glmer(count ~ cover + mined  + spp + (1|site), data = salamanders, family = \"poisson\")\nsalmod4.a <- glmmTMB(count ~ cover + mined  + spp + (1|site), data = salamanders, family = \"poisson\")\n\n# generalized linear model with negative binomial distribution and random effect of site\nsalmod5 <- glmer.nb(count ~ cover + mined  + spp + (1|site), data = salamanders)\nsalmod5.a <- glmmTMB(count ~ cover + mined + spp + (1|site), data = salamanders, family = \"nbinom2\")\n```\n:::\n\n\n## Look at residuals\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# check diagnostics\nplot(simulateResiduals(salmod1)) # bad\n```\n\n::: {.cell-output-display}\n![](workshop-10_2023-06-07_files/figure-html/model-residuals-1.png){fig-align='center' width=768}\n:::\n\n```{.r .cell-code}\nplot(simulateResiduals(salmod2)) # bad\n```\n\n::: {.cell-output-display}\n![](workshop-10_2023-06-07_files/figure-html/model-residuals-2.png){fig-align='center' width=768}\n:::\n\n```{.r .cell-code}\nplot(simulateResiduals(salmod3)) # ok?\n```\n\n::: {.cell-output-display}\n![](workshop-10_2023-06-07_files/figure-html/model-residuals-3.png){fig-align='center' width=768}\n:::\n\n```{.r .cell-code}\nplot(simulateResiduals(salmod4)) # bad\n```\n\n::: {.cell-output-display}\n![](workshop-10_2023-06-07_files/figure-html/model-residuals-4.png){fig-align='center' width=768}\n:::\n\n```{.r .cell-code}\nplot(simulateResiduals(salmod5)) # ok?\n```\n\n::: {.cell-output-display}\n![](workshop-10_2023-06-07_files/figure-html/model-residuals-5.png){fig-align='center' width=768}\n:::\n:::\n\n\n## Which distribution to use?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nMuMIn::model.sel(salmod1, salmod2, salmod3, salmod4, salmod5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nModel selection table \n        (Intrc)   cover mined spp       family    class init.theta link random\nsalmod5   1.409 -0.1042     +   + NB(0.9424,l) glmerMod                      s\nsalmod3   1.465 -0.1418     +   + NB(0.8333,l)   negbin      0.833  log       \nsalmod4   1.385 -0.1205     +   +         p(l) glmerMod                      s\nsalmod2   1.486 -0.2309     +   +         p(l)      glm                       \nsalmod1   3.447 -0.3426     +   +         g(i)       lm                       \n        df    logLik   AICc   delta weight\nsalmod5 11  -825.964 1674.3    0.00      1\nsalmod3 10  -836.039 1692.4   18.08      0\nsalmod4 10  -972.141 1964.6  290.28      0\nsalmod2  9 -1001.066 2020.4  346.07      0\nsalmod1 10 -1457.026 2934.4 1260.05      0\nAbbreviations:\n family: g(i) = 'gaussian(identity)', \n         NB(0.8333,l) = 'Negative Binomial(0.8333,log)', \n         NB(0.9424,l) = 'Negative Binomial(0.9424,log)', p(l) = 'poisson(log)'\nModels ranked by AICc(x) \nRandom terms: \n s: 1 | site\n```\n:::\n:::\n\n\n## Model summary\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# model object\nsalmod3\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:  glm.nb(formula = count ~ cover + mined + spp, data = salamanders, \n    init.theta = 0.8332590711, link = log)\n\nCoefficients:\n(Intercept)        cover     minedyes        sppDF        sppDM      sppEC-A  \n     1.4647      -0.1418      -2.1802      -0.4806      -0.3982      -1.4829  \n    sppEC-L        sppGP        sppPR  \n    -0.2155      -0.8030      -2.0647  \n\nDegrees of Freedom: 643 Total (i.e. Null);  635 Residual\nNull Deviance:\t    885.6 \nResidual Deviance: 549.2 \tAIC: 1692\n```\n:::\n\n```{.r .cell-code}\n# summary \nsummary(salmod3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nglm.nb(formula = count ~ cover + mined + spp, data = salamanders, \n    init.theta = 0.8332590711, link = log)\n\nDeviance Residuals: \n    Min       1Q   Median       3Q      Max  \n-1.7966  -0.8511  -0.6062   0.0812   3.4038  \n\nCoefficients:\n            Estimate Std. Error z value Pr(>|z|)    \n(Intercept)  1.46467    0.15733   9.309  < 2e-16 ***\ncover       -0.14180    0.07715  -1.838 0.066062 .  \nminedyes    -2.18017    0.17186 -12.686  < 2e-16 ***\nsppDF       -0.48061    0.21439  -2.242 0.024977 *  \nsppDM       -0.39819    0.21264  -1.873 0.061123 .  \nsppEC-A     -1.48291    0.24619  -6.023 1.71e-09 ***\nsppEC-L     -0.21550    0.20909  -1.031 0.302713    \nsppGP       -0.80299    0.22230  -3.612 0.000304 ***\nsppPR       -2.06472    0.27822  -7.421 1.16e-13 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for Negative Binomial(0.8333) family taken to be 1)\n\n    Null deviance: 885.60  on 643  degrees of freedom\nResidual deviance: 549.16  on 635  degrees of freedom\nAIC: 1692.1\n\nNumber of Fisher Scoring iterations: 1\n\n              Theta:  0.833 \n          Std. Err.:  0.108 \n\n 2 x log-likelihood:  -1672.078 \n```\n:::\n\n```{.r .cell-code}\n# confidence intervals\nconfint(salmod3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                 2.5 %      97.5 %\n(Intercept)  1.1619452  1.78160994\ncover       -0.2951066  0.01123174\nminedyes    -2.5140207 -1.85565670\nsppDF       -0.9135120 -0.04834588\nsppDM       -0.8214220  0.02428889\nsppEC-A     -1.9694420 -1.00469459\nsppEC-L     -0.6235862  0.19129668\nsppGP       -1.2339240 -0.37486002\nsppPR       -2.6278646 -1.52359253\n```\n:::\n\n```{.r .cell-code}\n# adjusted R2\nr.squaredGLMM(salmod3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                R2m       R2c\ndelta     0.4341864 0.4341864\nlognormal 0.5806880 0.5806880\ntrigamma  0.2400616 0.2400616\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# model object in table\nsalmod3 %>% \n  as_flextable()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-abe15496{}.cl-abd6f636{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-abd6f640{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-abdf5d3a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-abdf5d3b{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-abdf6726{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6727{width:0.88in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6730{width:1.287in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6731{width:0.803in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6732{width:0.785in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6733{width:0.4in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf673a{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf673b{width:0.88in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf673c{width:1.287in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf673d{width:0.803in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf673e{width:0.785in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6744{width:0.4in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6745{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6746{width:0.88in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6747{width:1.287in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf674e{width:0.803in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf674f{width:0.785in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6750{width:0.4in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6751{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6758{width:0.88in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6759{width:1.287in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf675a{width:0.803in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6762{width:0.785in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6763{width:0.4in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6764{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6765{width:0.88in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf676c{width:1.287in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf676d{width:0.803in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf676e{width:0.785in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf676f{width:0.4in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6776{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6777{width:0.88in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6778{width:1.287in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6780{width:0.803in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6781{width:0.785in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6782{width:0.4in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6783{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf678a{width:0.88in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf678b{width:1.287in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf678c{width:0.803in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6794{width:0.785in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6795{width:0.4in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6796{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf6797{width:0.88in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf679e{width:1.287in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf679f{width:0.803in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf67a0{width:0.785in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf67a8{width:0.4in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf67a9{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf67aa{width:0.88in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf67ab{width:1.287in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf67ac{width:0.803in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf67b2{width:0.785in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-abdf67b3{width:0.4in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-abe15496'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-abdf6726\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\"></span></p></th><th class=\"cl-abdf6727\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">Estimate</span></p></th><th class=\"cl-abdf6730\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">Standard Error</span></p></th><th class=\"cl-abdf6731\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">z value</span></p></th><th class=\"cl-abdf6732\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">Pr(&gt;|z|)</span></p></th><th class=\"cl-abdf6733\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\"></span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-abdf673a\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">(Intercept)</span></p></td><td class=\"cl-abdf673b\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">1.465</span></p></td><td class=\"cl-abdf673c\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.157</span></p></td><td class=\"cl-abdf673d\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">9.309</span></p></td><td class=\"cl-abdf673e\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.0000</span></p></td><td class=\"cl-abdf6744\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">***</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-abdf6745\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">cover</span></p></td><td class=\"cl-abdf6746\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-0.142</span></p></td><td class=\"cl-abdf6747\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.077</span></p></td><td class=\"cl-abdf674e\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-1.838</span></p></td><td class=\"cl-abdf674f\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.0661</span></p></td><td class=\"cl-abdf6750\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">  .</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-abdf6751\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">minedyes</span></p></td><td class=\"cl-abdf6758\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-2.180</span></p></td><td class=\"cl-abdf6759\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.172</span></p></td><td class=\"cl-abdf675a\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-12.686</span></p></td><td class=\"cl-abdf6762\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.0000</span></p></td><td class=\"cl-abdf6763\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">***</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-abdf6764\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">sppDF</span></p></td><td class=\"cl-abdf6765\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-0.481</span></p></td><td class=\"cl-abdf676c\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.214</span></p></td><td class=\"cl-abdf676d\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-2.242</span></p></td><td class=\"cl-abdf676e\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.0250</span></p></td><td class=\"cl-abdf676f\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">  *</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-abdf6764\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">sppDM</span></p></td><td class=\"cl-abdf6765\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-0.398</span></p></td><td class=\"cl-abdf676c\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.213</span></p></td><td class=\"cl-abdf676d\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-1.873</span></p></td><td class=\"cl-abdf676e\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.0611</span></p></td><td class=\"cl-abdf676f\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">  .</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-abdf6776\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">sppEC-A</span></p></td><td class=\"cl-abdf6777\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-1.483</span></p></td><td class=\"cl-abdf6778\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.246</span></p></td><td class=\"cl-abdf6780\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-6.023</span></p></td><td class=\"cl-abdf6781\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.0000</span></p></td><td class=\"cl-abdf6782\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">***</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-abdf6776\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">sppEC-L</span></p></td><td class=\"cl-abdf6777\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-0.215</span></p></td><td class=\"cl-abdf6778\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.209</span></p></td><td class=\"cl-abdf6780\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-1.031</span></p></td><td class=\"cl-abdf6781\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.3027</span></p></td><td class=\"cl-abdf6782\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">   </span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-abdf6776\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">sppGP</span></p></td><td class=\"cl-abdf6777\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-0.803</span></p></td><td class=\"cl-abdf6778\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.222</span></p></td><td class=\"cl-abdf6780\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-3.612</span></p></td><td class=\"cl-abdf6781\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.0003</span></p></td><td class=\"cl-abdf6782\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">***</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-abdf6783\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">sppPR</span></p></td><td class=\"cl-abdf678a\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-2.065</span></p></td><td class=\"cl-abdf678b\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.278</span></p></td><td class=\"cl-abdf678c\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">-7.421</span></p></td><td class=\"cl-abdf6794\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f636\">0.0000</span></p></td><td class=\"cl-abdf6795\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">***</span></p></td></tr></tbody><tfoot><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"6\"class=\"cl-abdf6796\"><p class=\"cl-abdf5d3b\"><span class=\"cl-abd6f640\">Signif. codes: 0 &lt;= '***' &lt; 0.001 &lt; '**' &lt; 0.01 &lt; '*' &lt; 0.05</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"6\"class=\"cl-abdf67a9\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\"> </span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"6\"class=\"cl-abdf67a9\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">(Dispersion parameter for Negative Binomial(0.8333) family taken to be 1)</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"6\"class=\"cl-abdf67a9\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">Null deviance: 885.6 on 643 degrees of freedom</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"6\"class=\"cl-abdf67a9\"><p class=\"cl-abdf5d3a\"><span class=\"cl-abd6f636\">Residual deviance: 549.2 on 635 degrees of freedom</span></p></td></tr></tfoot></table></div>\n```\n:::\n:::\n\n\n\n## Visualizing:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npredictions <- ggpredict(salmod3, terms = c(\"cover\", \"mined\", \"spp\")) %>% \n  rename(mined = group,\n         spp = facet)\n\nggplot(salamanders, aes(x = cover, y = count, fill = mined)) +\n  geom_point(aes(color = mined), alpha = 0.5) +\n  facet_wrap(~spp, scales = \"free_y\") +\n  geom_line(data = predictions, aes(x = x, y = predicted, color = mined)) +\n  geom_ribbon(data = predictions, aes(x = x, y = predicted, ymin = conf.low, ymax = conf.high, fill = mined), alpha = 0.2) +\n  scale_fill_manual(values = c(\"yes\" = \"blue\", \"no\" = \"orange\")) +\n  scale_color_manual(values = c(\"yes\" = \"blue\", \"no\" = \"orange\")) +\n  theme_bw() +\n  facet_wrap(~spp, scales = \"free_y\") +\n  labs(fill = \"Mined\", color = \"Mined\")\n```\n\n::: {.cell-output-display}\n![](workshop-10_2023-06-07_files/figure-html/visualization-1.png){fig-align='center' width=90%}\n:::\n:::\n",
    "supporting": [
      "workshop-10_2023-06-07_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}