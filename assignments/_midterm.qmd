---
title: "Midterm"
editor: source
published-title: "Due date"
date: 2025-05-07
date-modified: last-modified
---

[Due on Wednesday May 7 (Week 6) at 11:59 PM]{style="color: #79ACBD; font-size: 24px;"}

## Description

In this midterm, you will demonstrate your ability to synthesize lecture concepts and technical skills from workshop. At this point, you have the _conceptual_ ideas you need (for example, what is the appropriate test to use if you want to compare groups?) and the _technical_ skills you need (for example, summarizing data, visualizing data). You also have the _investigative_ skills you need (for example, reading for tasks, googling!). You will use all these components to complete the midterm.  

This midterm is open note, open internet, open everything; feel free to also talk with classmates and friends. 

```{r set-up}
#| message: false
#| echo: false
#| warning: false


library(tidyverse)
library(here) 
library(readxl)
library(effectsize)
library(janitor)
```

## Problem 1. Test interpretation and communication (**POINTS HERE**) 

### Skills you will demonstrate

In this problem, you will be responsible for interpreting the results of a test with which you may be familiar, but haven't seen. You will also **demonstrate your ability to interpret code output and synthesize the statistics in writing to ground the stats in biology** for a scientific audience.  

### Description

Residents in Flint, Michigan have dealt with lead contamination in their water from 2014 to now. In **INSERT YEAR HERE**, residents conducted their own experiment to demonstrate that the city's recommendation to flush water out of the faucet before using it was not effective at clearing lead from drinking water. Residents took water samples at three different time points (letting the water run the whole time:  
1. immediately after turning on the water  
2. 45 seconds after turning on the water  
3. 2 minutes after turning on the water.  

In this problem, you will interpret the statistical results to answer the questions:  
1. Is there a difference in lead (measured in parts per million, ppm) between water samples taken immediately after turning on the water and 2 minutes after turning on the water?  
2. Is the amount of lead in the water after 2 minutes different from 0?

```{r problem-1-data}
#| echo: false
#| message: false

flint <- read_xlsx(here::here("data", "Flint-Samples-WORKING-COPY.xlsx"),
                                  sheet = "Samples from Flint Water homes")

flint_clean <- flint |> 
  clean_names() |> 
  filter(sample_id != 31)

# paired

t.test(flint_clean$pb_bottle_1_ppb_first_draw, 
       flint_clean$pb_bottle_3_ppb_2_mins_flushing, 
       paired = TRUE)

cohens_d(flint_clean$pb_bottle_1_ppb_first_draw, 
       flint_clean$pb_bottle_3_ppb_2_mins_flushing, 
       paired = TRUE)

# one sample

t.test(flint_clean$pb_bottle_3_ppb_2_mins_flushing,
       mu = 0)
```

## Problem 2. Reproducing an analysis (41 points)

### Skills you will demonstrate

In environmental studies, open research means that researchers make their data and/or their code available for anyone to see. This means that anyone should be able to reproduce the analysis, even if they are not on the research team. **In this problem, you will demonstrate your ability to read a paper to understand the context for a research study and its statistical analysis. You will then demonstrate your ability to take a data set and analyze it, using the researchers' original analysis as a guide.**  

### Description

You will reproduce the analysis in: Steketee, Jess K., Adrian V. Rocha, Laura Gough, Kevin L. Griffin, Ian Klupar, Ruby An, Nicole Williamson, and Rebecca J. Rowe. 2022. “Small Herbivores with Big Impacts: Tundra Voles (Microtus Oeconomus) Alter Post-Fire Ecosystem Dynamics.” _Ecology_ 103(7): e3689. [https://doi.org/10.1002/ecy.3689](https://doi.org/10.1002/ecy.3689)  

**Read all parts of the paper before starting this problem.**  

You will specifically recreate the components in this passage:  

> Although tussock density was lower at the burned site, tussocks were larger 
> (Table 1, Figure 2a).

#### Getting the data

This statement relies on the dataset stored here:  

Rocha, A. 2021. Tussock height and diameter in moist acidic tussock tundra at the site of the
2007 Anaktuvuk River fire scar, and nearby unburned tundra measured in 2016 ver 1.
Environmental Data Initiative. [https://doi.org/10.6073/pasta/1dccd3fdb3aa693f9c2b69a24f8306ed](https://doi.org/10.6073/pasta/1dccd3fdb3aa693f9c2b69a24f8306ed)  

Download the data into your midterm directory. To understand the data structure, read the metadata (under Resources > View full metadata).   

### Components

#### a. Variables

In 1-2 sentences, describe the response variable (with units) and predictor variable. Explain the _type_ of each variable (categorical, continuous, etc.).

#### b. Summarizing and table displays

Calculation the:  
- means,  
- standard deviations,  
- standard errors, and   
- 95% confidence intervals of the means  
for the response variable within the two groups. Round all numbers to 1 decimal point.  

Display these results in a **table**. Use _one_ of the following packages to do so:  
- `kableExtra`
- `gt`
- `flextable`

**Note: render your document to make sure things look right.**

#### c. Response variable (2 points)

In 1-2 sentences, explain the biological interpretation of the difference in mean dry weight between control and treatments in the feeding trials. For example, if mean dry weight is lower in the treatment than the control, what would be your biological explanation for why that is the case?  

#### d. Reading in the data (2 points)

Load in the data and do any cleaning/wrangling steps you need.
 
#### e. Summary statistics (8 points)

Calculate the mean and standard deviation of:

  - pickleweed root biomass in control and treatment for trial (i)  
  - algal biomass in control and treatment for trial (ii)  
  - both pickleweed and algal biomass in control and treatment for trial (iii)  
    
Display your results.  

#### f. Welch's t-tests (10 points)

Conduct Welch's t-tests comparing biomasses between control and treatment in: 

  - trial (i)    
  - trial (ii)  
  - trial (iii)    
    
Display the outputs for all 3 tests.

#### g. Making a new figure (11 points)

Plots like Figure 6 show means and whiskers (in this case, standard error), but do not show the data structure and can mask important information about the spread of the observations in each sample.  

Make a new figure for figure 6 that displays the mean and standard error (as in figure 6) but shows the underlying data. Finalize it.  

For full credit:  

  - take out the gridlines  
  - jitter the underlying data horizontally but _not_ vertically  
  - give each type a different color that is different from the `ggplot()` default color  
  - make the underlying data more transparent than the dot and whisker  
  - make the dot and whisker larger than the underlying data   
  - take out the legend  

#### h. Caption (4 points)

Write a caption for your figure in part i. Include a data citation, if appropriate.

## Problem 3. Cleaning, wrangling, and visualization (19 points)

### Skills you will demonstrate

Figures are built on data; however, to make a figure, you need to understand the data structure and any cleaning, wrangling, or summarizing steps to create it. In this problem, **you will demonstrate your ability to clean, wrangle, and/or summarize a data set to create a figure**, using a final figure as a guide.

### Description

In this problem, you will use the `arc_weather` dataset from `lterdatasampler` to recreate this figure. 

![](/assignments/images/midterm/arc_weather_figure.jpg)

The caption for the figure is as follows:  

**Figure 1. Toolik Field Station is above freezing between May and September.** Blue lines represent mean monthly air temperature for a given year (1988 - 2018), with lines becoming lighter with more recent years. Horizontal black dashed line at 0 °C for reference. Data source: Horst A, Brun J (2023). _lterdatasampler: Educational Dataset Examples from the Long Term Ecological Research Program_. R package version 0.1.1, <https://CRAN.R-project.org/package=lterdatasampler>.  

**Approach:**  

You will need to clean/wrangle the data before making this figure. You should end up with **mean monthly air temperature**, calculated for each month in each year. Your final data frame _could_ look something like this:  

![](/assignments/images/midterm/dataframe-example.png){width=50%}

:::{.callout-tip}
Note that there are multiple ways of approaching the cleaning/wrangling steps and the visualization steps. There is no one "correct" approach, as long as you get to the right output. 
:::

### Components

#### a. Initial cleaning, wrangling, and summarizing (6 points)

Write your code to create `arc_weather_clean`, a clean and wrangled data frame. Annotate each line of code.

Once you're done, display the first 10 rows of your data frame using `head(arc_weather_clean, 10)` in your script.  

:::{.callout-tip}
##### Problem prep - do this on scratch paper (not in your document)

In words (not code), write the list of functions/arguments that would get you to the final data frame. For example:

1. Create a data frame called `arc_weather_clean`. Start with `arc_weather` data frame, and then...  
2. [insert next step here], and then...  
3. [insert next step here], and then...  
4. [insert next step here], and then...  

and so on. Use these steps to guide the code you write. Code not working? Rewrite your steps on scratch paper and try again.
:::

#### b. Make the figure (13 points)

Write your code to recreate the figure. Display the output.  

:::{.callout-tip}
### Problem prep - do this on scratch paper (not in your document)

Make a list of the arguments in the `aes()` call and any `geom_()` calls you will need to use. What are the x- and y-axes, and what do the colors represent?  

:::

 

## Checklist

Your submission should:

- Include your name, the title (“Midterm”), and the date you turned in your midterm **(3 points)**  
- Include for Problem 1:  
    - written responses for a-h  
- Include for Problem 2:  
    - written responses for a-c    
    - full work (R code and annotations), output, and written response for d-g   
    - written response for h  
- Include for Problem 3:
    - full work (R code and annotations) and output for a-b  
- Include for Problem 4:  
    - written response for a  
    - full work (R code and annotations) and output for b    
    - written response for c  
    - full work (R code and annotations) and output for d  
- be uploaded to Canvas as a single PDF **(1 point)**  
- be organized and readable: a rendered Quarto document without any messages/warnings and figure output formatted correctly **(10 points)**

**113 points total**




